<ion-content>
  <ion-grid>
    <ion-row>

        <ion-card class="ion-text-center">
          <ion-card-header>

            <ion-card-subtitle class="kronos">
                {{kronos}}
            </ion-card-subtitle>

            <ng-container>
              <ion-avatar>
                <img alt="Avatar" src="{{ profile.user.profilePicturePath }}" />
              </ion-avatar>
            </ng-container>

            <ion-card-subtitle class="username">
              {{ profile.user.username }}
            </ion-card-subtitle>

          </ion-card-header>
          <!-- <ng-container *ngIf="(profile$ | async) as profile; else noProfile"> -->
          <ion-card-content>
            <ion-grid class="stats">

              <ion-row class="statsNumber">
                <ion-col id="followingCount">{{followingCount}}</ion-col>
                <ion-col>{{postCount}}</ion-col>
                <ion-col>{{followerCount}}</ion-col>
              </ion-row>
            

              <ion-row class="statsLabel">
                <ion-col>Following</ion-col>
                <ion-col>Posts</ion-col>
                <ion-col>Followers</ion-col>
              </ion-row>
            </ion-grid>

            <ion-row class="ion-justify-content-center">
      
              <ng-template [ngIf]="profile.user.user_id !== currentUser?.user_id">
                <ng-template  [ngIf]="Status === 0">
                  <ion-button class="connectButton" (click)="followUser()">
                    <ion-icon name="person-outline"></ion-icon>
                  </ion-button>
                </ng-template>

                <ng-template #notFollowed [ngIf]="Status === 1">
                  <ion-button (click)="followUser()" class="connectButton">
                    <ion-icon name="person-add-outline"></ion-icon>
                  </ion-button>
                </ng-template>

                <ng-template #Requested [ngIf]="Status === 2">
                  <ion-button (click)="followUser()" class="connectButton">
                    Requested
                  </ion-button>
                </ng-template>

                <div class="rowSpacing"></div>

                <ion-button (click)="goToMessages()" class="connectButton">
                  <ion-icon name="chatbox-ellipses-outline"></ion-icon></ion-button>
              </ng-template>

            </ion-row>

            <ion-card-subtitle class="bio">
              {{profile.user.bio}}
            </ion-card-subtitle>
            <ng-container>
              <ng-template [ngIf]=" profile.user.user_id == currentUser?.user_id || (!profile.user.notPublic && Status == 1 || !profile.user.notPublic && Status == 0)" [ngIfElse]="Private">
                <ng-template  [ngIf]="postCount != 0" [ngIfElse]="noPosts">
                  <ion-card class="photos">
                    <ion-card-content class="ion-text-center">
                      <!-- <ion-content [fullscreen]="true" [scrollEvents]="true"> -->
                          <ion-grid [fixed]="true">
                            <ion-row class="ion-justify-content-center" *ngFor="let i of profile.posts">
                                <ion-col class="ion-col">
                                  <ion-img src="{{ i.content }}" (click)="openBlip(i,profile.user.username)" alt=""></ion-img>
                                </ion-col>
                            </ion-row>
                          </ion-grid>
                      <!-- </ion-content> -->
                    </ion-card-content>
                  </ion-card>
                </ng-template>

                <ng-template #noPosts>
                  <p>No posts found.</p>
                </ng-template>
              </ng-template>
              <ng-template #Private>
                <h2>Request to follow to see {{profile.user.username}}'s posts</h2>
              </ng-template>
            </ng-container>
        
          </ion-card-content>
        <!-- </ng-container> -->
        </ion-card>

    </ion-row>
  </ion-grid>